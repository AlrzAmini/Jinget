@using Jinget.Blazor.Components.Picker.CultureService
@using MudBlazor

<MudDateRangePicker Label=@Label
                    @bind-Date="Value"
                    Culture="@CalendarService.GetCulture("fa-IR")"
                    TitleDateFormat="dddd, dd MMMM"
                    DateRangeChanged="(e)=>DateRangeChangedAsync(e)"/>

@code {

    [Parameter] public object? Value { get; set; }
    [Parameter] public string Label { get; set; } = "بازه تاریخی";
    [Parameter] public EventCallback<SelectedDateRangeModel> DateRangeChanged { get; set; }

    async Task DateRangeChangedAsync(DateRange e)
    {
        await DateRangeChanged.InvokeAsync(new SelectedDateRangeModel(
            e.Start,
            e.End,
            e.Start.HasValue ? Jinget.Core.Utilities.DateTimeUtility.ToSolarDate(e.Start.Value) : null,
            e.End.HasValue ? Jinget.Core.Utilities.DateTimeUtility.ToSolarDate(e.End.Value) : null));
    }
}