@page "/dropdownlist"

@using Jinget.Blazor.Components.DropDownList
@using Jinget.Blazor.Components.Popup
@using Jinget.Blazor.Models
<JingetMessageBox @ref=@messageBox
                  ShowVerboseFuncAsync=@(async ()=>await Task.FromResult<bool>(true))></JingetMessageBox>
<JingetDropDownList @ref=@ddlSample
                    Id="ddlSample"
                    DataProviderFunc=@GetData
                    DefaultText="---Choose---"
                    HelperText="This is sample drop down list"
                    DisplayName="DDLSample"
                    IsDisabled=false
                    IsReadOnly=false
                    OnChange=@OnChange></JingetDropDownList>
<hr />
<JingetSearchableDropDownList @ref=ddlSearchable
                              Id="ddlSearchableSample"
                              DataProviderFunc=@GetData
                              DefaultText="--Choose---"
                              IsDisabled=false
                              OnChange=@OnChangeSearchable>
</JingetSearchableDropDownList>

@code {

    JingetMessageBox? messageBox;
    JingetDropDownList ddlSample;
    JingetSearchableDropDownList ddlSearchable;


    async Task<List<JingetDropDownItemModel>> GetData()
    {
        return await Task.FromResult(new List<JingetDropDownItemModel>
    {
        new JingetDropDownItemModel(1,"Iran"),
        new JingetDropDownItemModel(2,"USA"),
        new JingetDropDownItemModel(3,"UK"),
        new JingetDropDownItemModel(4,"Russia"),
        new JingetDropDownItemModel(5,"Canada"),
        new JingetDropDownItemModel(6,"China")
    });
    }

    public async Task OnChange(ChangeEventArgs e)
    {
        await messageBox.ShowInfoAsync("Selected", "Selected Item Changed", Newtonsoft.Json.JsonConvert.SerializeObject(ddlSample.SelectedItem));
    }

    public async Task OnChangeSearchable(ChangeEventArgs e)
    {
        await messageBox.ShowInfoAsync("Selected", "Selected Item Changed", Newtonsoft.Json.JsonConvert.SerializeObject(ddlSearchable.SelectedItem));
    }
}